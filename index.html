<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event RSVP</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        img { max-width: 100%; height: auto; }
        .popup { display: none; background-color: rgba(0, 0, 0, 0.5); color: white; position: fixed; top: 0; left: 0; width: 100%; height: 100%; justify-content: center; align-items: center; }
        .popup-content { background-color: #333; padding: 20px; border-radius: 10px; }
        button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #45a049; }
        .menu { margin-top: 30px; padding: 20px; background-color: #f9f9f9; border-radius: 10px; }
        .menu h3 { color: #333; }
        .menu iframe { width: 100%; height: 500px; border: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to the Event!</h1>
        <img id="mainImage" src="default-image.jpg" alt="Event Image">
        
        <h2>Please enter the password to proceed</h2>
        
        <!-- Password Entry Form -->
        <input type="password" id="password" placeholder="Enter Password" required>
        <button onclick="checkPassword()">Submit</button>

        <!-- Form for Name Entry (Initially Hidden) -->
        <div id="nameForm" style="display:none;">
            <h2>Please enter your first and last name</h2>
            <input type="text" id="firstName" placeholder="First Name" required>
            <input type="text" id="lastName" placeholder="Last Name" required>
            <button onclick="submitName()">Submit</button>
        </div>
    </div>

    <!-- Popup displaying table and meal info -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2>Welcome, <span id="userName"></span>!</h2>
            <p>Your Table Number: <span id="tableNumber"></span></p>
            <p>Your Meal Selection: <span id="mealSelection"></span></p>
            <p><a href="javascript:void(0);" onclick="closePopup()">Close</a></p>
        </div>
    </div>

    <!-- Full Menu Section with PDF -->
    <div class="menu">
        <h3>Our Menu for the Night</h3>
        <iframe src="menu.pdf" title="Event Menu"></iframe>
    </div>

    <script>
        const password = '1234'; // Password for accessing the site
        let data = []; // This will hold the data from the JSON file

        // Fetch the JSON data
        fetch('data.json')
            .then(response => response.json())
            .then(jsonData => {
                data = jsonData;
            })
            .catch(error => {
                console.error('Error loading the data:', error);
            });

        // Check the password entered by the user
        function checkPassword() {
            const enteredPassword = document.getElementById('password').value;
            if (enteredPassword === password) {
                document.getElementById('nameForm').style.display = 'block'; // Show name entry form
                document.getElementById('password').style.display = 'none'; // Hide password input
            } else {
                alert('Incorrect password. Please try again.');
            }
        }

        // Find the user's table and meal selection based on their name
        function submitName() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const user = data.find(entry => entry.firstName.toLowerCase() === firstName.toLowerCase() && entry.lastName.toLowerCase() === lastName.toLowerCase());

            if (user) {
                // Display user information in the popup
                document.getElementById('userName').textContent = user.firstName + ' ' + user.lastName;
                document.getElementById('tableNumber').textContent = user.tableNumber;
                document.getElementById('mealSelection').textContent = user.meal;
                document.getElementById('popup').style.display = 'flex';
            } else {
                alert('No matching name found. Please check your name and try again.');
            }
        }

        // Close the popup
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
    </script>
</body>
</html>